<%= render "shared/context_nav", title: t("activerecord.models.#{Produto.model_name.i18n_key}.other"), new_path: new_produto_path do %>
  <span class="breadcrumb-item active"><%= t("activerecord.models.#{Produto.model_name.i18n_key}.other") %></span>
<% end %>
<div class="d-flex justify-content-end mb-3">
  <%= link_to "Tabela", produtos_path, class: "btn btn-outline-primary me-2" %>
  <%= link_to "Cards", cards_produtos_path, class: "btn btn-primary" %>
</div>
<div class="row">
  <% @produtos.each do |produto| %>
    <div class="col-12 col-md-4 mb-4">
      <div class="card">
        <% if produto.imagem.attached? %>
          <!-- Quando a imagem está carregada, exibe a imagem do ActiveStorage -->
          <img src="<%= url_for(produto.imagem) %>" class="card-img-top" alt="<%= produto.nome %>">
        <% else %>
          <!-- Caso não tenha imagem, exibe a imagem padrão (pode ser estática ou gerada dinamicamente) -->
          <img src="<%= produto.imagem_padrao %>" class="card-img-top" alt="<%= produto.nome %>">
        <% end %>
        <div class="card-body">
          <h5 class="card-title"><%= produto.nome %></h5>
          <p class="card-text"><%= produto.descricao %></p>
          <p class="card-text">Preço: <%= number_to_currency(produto.preco) %></p>
          <p class="card-text">Estoque: <%= produto.quantidade_estoque %></p>
          <a href="<%= edit_produto_path(produto) %>" class="btn btn-primary">Editar</a>
          <%= form_for produto, method: :delete do |f| %>
            <%= link_to 'Excluir', produto_path(produto), method: :delete, data: { confirm: 'Tem certeza?' }, class: "btn btn-danger" %>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>
  <div class="card-footer">
    <%= pagy_bootstrap_nav(@pagy, link_extra: 'class="btn btn-outline-secondary btn-sm mx-1"').html_safe %>
  </div>
</div>
